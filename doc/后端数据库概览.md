# 后端数据库概览

+ 本文档主要描述后端存储哪些数据库及其数据格式；
+ “行程组”描述一次旅行，“行程”描述一次旅行中到访的一个城市；
+ 目前只存在两种系统消息：加好友请求和关联行程请求，暂不支持用户间消息；
+ 由于 Markdown 语法暂不支持下划线，因此以 `key` 标记主键；
+ 最后更新时间 2019/4/24，当前版本号v0.2。

## 用户信息
| `user_id` | user_name | email |  pswd  |      gender       | resident_city_id |
| :-------: | :-------: | :---: | :----: | :---------------: | :--------------: |
|           |           |       | 加密串 | 男/女/其他/未指定 |                  |

## 好友关系
| `user_id` | friend_user_id |     friend_note      |
| :-------: | :------------: | :------------------: |
|           |                | 备注信息，任意字符串 |

## 用户-行程组
| `user_id` | `travel_group_id` |
| :-------: | :---------------: |
|           |                   |

## 行程组
| `travel_group_id` |  travel_group_note   |
| :---------------: | :------------------: |
|                   | 备注信息，任意字符串 |

## 行程组-行程
| `travel_group_id` | `travel_id` |
| :---------------: | :---------: |
|                   |             |

## 行程信息
| `travel_id` | time_start | time_end | city_id |   visibility   |     travel_note      |
| :---------: | :--------: | :------: | :-----: | :------------: | :------------------: |
|             |            |          |         | 自己/好友/公开 | 备注信息，任意字符串 |

## 行程-好友关联

| `travel_id` | company_user_id |
| :------------: | :-------------: |
|                |                 |

## 城市信息

| `city_id` | city_name | latitude | longitude |
| :-------: | :-------: | :------: | :-------: |
|           |           |          |           |

## 好友请求消息
| `user_id` | friend_user_id |   msg_type    | msg_content |
| :-------: | :------------: | :-----------: | :---------: |
|           |                | 加好友/删好友 |             |

## 行程关联消息
| `user_id` | friend_travel_id |              msg_type               | msg_content |
| :-------: | :--------------: | :---------------------------------: | :---------: |
|           |                  | 加入行程/离开行程/修改行程/删除行程 |             |
